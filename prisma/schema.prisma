// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Task {
  id String @id @default(cuid())
  description String
  responsible Users @relation("Responsible", fields: [responsibleId], references: [id])
  createdBy Users @relation("CreatedBy",fields: [createdById], references: [id])
  status Status @relation(fields: [statusId], references: [id])
  priority Priority @relation(fields: [priorityId], references: [id])
  dashboard Dashboard @relation(fields: [dashboardId], references: [id])
  createdDate DateTime @map("created_date") @default(now())
  dueDate DateTime @map("due_date") @default(now())
  responsibleId String @map("responsible_id")
  createdById String @map("createdBy_Id")
  statusId String @map("status_id")
  priorityId String @map("priority_id")
  dashboardId String @map("dashboard_id")
}

model Users { //since 'User' is a reserved word, we are choosing 'Users' for this one
  id String @id @default(cuid())
  username String @unique
  role String
  createdDate DateTime @map("created_date") @default(now())
  Responsible Task[] @relation("Responsible")
  CreatedBy Task[] @relation("CreatedBy")
  dashboards Dashboard[]
  dashboardUser DashboardUser[]
}

model Dashboard {
  id String @id @default(cuid())
  name String
  owner Users @relation(fields: [ownerId], references: [id])
  ownerId String @map("owner_id")
  tasks Task[]
  dashboardUser DashboardUser[]
}

model DashboardUser {
  id String @id @default(cuid())
  user Users @relation(fields: [userId], references: [id])
  userId String @map("user_id")
  dashboard Dashboard @relation(fields: [dashboardId], references: [id])
  dashboardId String @map("dashboard_id")
  createdDate DateTime @map("created_date") @default(now())
  updatedDate DateTime @map("updated_date") @default(now()) 
}

model Status {
  id String @id @default(cuid())
  description String
  tasks Task[]
}

model Priority {
  id String @id @default(cuid())
  description String
  tasks Task[]
}
